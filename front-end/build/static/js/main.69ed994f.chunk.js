(this["webpackJsonpstarter-restaurant-reservation-front-end"]=this["webpackJsonpstarter-restaurant-reservation-front-end"]||[]).push([[0],{19:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(20),s=n.n(c),i=n(4),l=n(7),o=n(0);var b=function(){return Object(o.jsx)("nav",{className:"navbar nav-custom align-items-start p-0",children:Object(o.jsxs)("div",{className:"container-fluid d-flex flex-column p-0",children:[Object(o.jsx)(l.b,{className:"navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0",to:"/",children:Object(o.jsx)("div",{className:"create-custom sidebar-brand-text mx-3",children:Object(o.jsx)("span",{children:"Periodic Tables"})})}),Object(o.jsx)("hr",{className:"sidebar-divider my-0"}),Object(o.jsxs)("ul",{className:"nav text-light",id:"accordionSidebar",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"text-custom nav-link",to:"/dashboard",children:[Object(o.jsx)("span",{className:"oi oi-dashboard"}),"\xa0Dashboard"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"text-custom nav-link",to:"/search",children:[Object(o.jsx)("span",{className:"oi oi-magnifying-glass"}),"\xa0Search"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"text-custom nav-link",to:"/reservations/new",children:[Object(o.jsx)("span",{className:"oi oi-plus"}),"\xa0New Reservation"]})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)(l.b,{className:"text-custom nav-link",to:"/tables/new",children:[Object(o.jsx)("span",{className:"oi oi-layers"}),"\xa0New Table"]})})]}),Object(o.jsx)("div",{className:"text-center d-none d-md-inline",children:Object(o.jsx)("button",{className:"btn rounded-circle border-0",id:"sidebarToggle",type:"button"})})]})})},j=n(2),d=n(3),u=n.n(d),h=n(5),m=/\d\d\d\d-\d\d-\d\d/,O=/\d\d:\d\d/;function x(e){return"".concat(e.getFullYear().toString(10),"-").concat((e.getMonth()+1).toString(10).padStart(2,"0"),"-").concat(e.getDate().toString(10).padStart(2,"0"))}function p(){return x(new Date)}function v(e){var t=e.split("-"),n=Object(j.a)(t,3),a=n[0],r=n[1],c=n[2],s=new Date(a,r-=1,c);return s.setMonth(s.getMonth()),s.setDate(s.getDate()-1),x(s)}function f(e){var t=e.split("-"),n=Object(j.a)(t,3),a=n[0],r=n[1],c=n[2],s=new Date(a,r-=1,c);return s.setMonth(s.getMonth()),s.setDate(s.getDate()+1),x(s)}function N(e){return e.reservation_date=e.reservation_date.match(m)[0],e}function y(e){return Array.isArray(e)?e.map(N):N(e)}var g="https://periodic-tables-backend-sd.herokuapp.com/",w=new Headers;function _(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:if(204!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,r.json();case 8:if(!(c=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:c.error}));case 11:return e.abrupt("return",c.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(a));case 20:case 21:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations")),Object.entries(t).forEach((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1];return a.searchParams.append(n,r.toString())})),e.next=4,_(a,{headers:w,signal:n},[]).then(y).then(y);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations/").concat(t)),e.next=3,_(a,{headers:w,signal:n},[]).then(y).then(y);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(g,"/tables")),e.next=3,_(n,{headers:w,signal:t},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(g,"/reservations/").concat(t,"/status")),c={method:"PUT",headers:w,body:JSON.stringify(n),signal:a},e.next=4,_(r,c,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(h.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(g,"/reservations/").concat(t)),c={method:"PUT",headers:w,body:JSON.stringify(n),signal:a},e.next=4,_(r,c,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(h.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/tables/").concat(t,"/seat")),r={method:"DELETE",headers:w,signal:n},e.next=4,_(a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(h.a)(u.a.mark((function e(t,n,a,r){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new URL("".concat(g,"/tables/").concat(t,"/seat")),s={method:a,headers:w,body:JSON.stringify(n),signal:r},e.next=4,_(c,s,[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/reservations")),r={method:"POST",headers:w,body:JSON.stringify(t),signal:n},e.next=4,_(a,r,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return z.apply(this,arguments)}function z(){return(z=Object(h.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(g,"/tables")),r={method:"POST",headers:w,body:JSON.stringify(t),signal:n},e.next=4,_(a,r,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w.append("Content-Type","application/json");var q=function(e){var t=e.error;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};function H(e){var t=e.reservations,n=e.loadDashboard,r=Object(a.useState)(null),c=Object(j.a)(r,2),s=c[0],i=c[1],l=function(){var e=Object(h.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to cancel this reservation? This cannot be undone.")){e.next=6;break}return a=new AbortController,i(null),e.next=5,A(t,{data:{status:"cancelled"}},a.signal).then(n).catch(i);case 5:return e.abrupt("return",(function(){return a.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=t.map((function(e,t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"row",children:e.reservation_id}),Object(o.jsx)("td",{children:e.first_name}),Object(o.jsx)("td",{children:e.last_name}),Object(o.jsx)("td",{children:e.mobile_number}),Object(o.jsx)("td",{children:e.reservation_date}),Object(o.jsx)("td",{children:e.reservation_time}),Object(o.jsx)("td",{children:e.people}),Object(o.jsx)("td",{children:Object(o.jsx)("p",{"data-reservation-id-status":e.reservation_id,children:e.status})}),Object(o.jsxs)("td",{children:["booked"!==e.status?null:Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("a",{href:"/reservations/".concat(e.reservation_id,"/seat"),className:"btn btn-outline-primary mx-1",children:"Seat"})}),"booked"!==e.status?null:Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("a",{href:"/reservations/".concat(e.reservation_id,"/edit"),className:"btn btn-outline-primary mx-1",children:"Edit"})}),"booked"!==e.status?null:Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("button",{"data-reservation-id-cancel":e.reservation_id,onClick:function(){return l(e.reservation_id)},className:"btn btn-outline-danger ml-1",children:"Cancel"})})]})]},t)}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(q,{error:s}),Object(o.jsxs)("table",{className:"text-custom table caption-top",children:[Object(o.jsx)("caption",{children:"Reservations"}),Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"col",children:"ID #"}),Object(o.jsx)("th",{scope:"col",children:"First"}),Object(o.jsx)("th",{scope:"col",children:"Last"}),Object(o.jsx)("th",{scope:"col",children:"Mobile Number"}),Object(o.jsx)("th",{scope:"col",children:"Date"}),Object(o.jsx)("th",{scope:"col",children:"Time"}),Object(o.jsx)("th",{scope:"col",children:"People"}),Object(o.jsx)("th",{scope:"col",children:"Status"}),Object(o.jsx)("th",{scope:"col"})]})}),Object(o.jsx)("tbody",{children:b})]})]})}function Y(e){var t=e.tables,n=e.loadDashboard,r=e.loadTables,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],l=s[1];function b(e){if(window.confirm("Is this table ready to seat new guests? This cannot be undone.")){var t=new AbortController;return l(null),function(e,t){return L.apply(this,arguments)}(e,t.signal).then(n).then(r).catch(l),function(){return t.abort()}}}var d=t.sort().map((function(e,t){return Object(o.jsx)(o.Fragment,{children:e.occupied||e.reservation_id?Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"row",children:e.table_id}),Object(o.jsx)("td",{children:e.table_name}),Object(o.jsx)("td",{children:e.capacity}),Object(o.jsx)("td",{children:e.reservation_id}),Object(o.jsx)("td",{children:Object(o.jsx)("p",{"data-table-id-status":e.table_id,children:"Occupied"})}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{"data-table-id-finish":e.table_id,className:"btn btn-outline-primary",onClick:function(){return b(e.table_id)},children:"Finish"})})]},t):Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"row",children:e.table_id}),Object(o.jsx)("td",{children:e.table_name}),Object(o.jsx)("td",{children:e.capacity}),Object(o.jsx)("td",{children:e.reservation_id}),Object(o.jsx)("td",{children:Object(o.jsx)("p",{className:"col","data-table-id-status":e.table_id,children:"Free"})})]},t)})}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(q,{error:i}),Object(o.jsx)("div",{children:Object(o.jsxs)("table",{className:"text-custom table align-middle",children:[Object(o.jsx)("caption",{children:"Tables"}),Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{scope:"col",children:"ID #"}),Object(o.jsx)("th",{scope:"col",children:"Table Name"}),Object(o.jsx)("th",{scope:"col",children:"Table Capacity"}),Object(o.jsx)("th",{scope:"col",children:"Reservation ID#"}),Object(o.jsx)("th",{scope:"col",children:"Occupied?"}),Object(o.jsx)("th",{scope:"col"})]})}),Object(o.jsx)("tbody",{children:d})]})})]})}var G=n(22),K=n.n(G);n(19);var Q=function(e){var t=e.date,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)(null),d=Object(j.a)(b,2),u=d[0],h=d[1],m=Object(a.useState)(t),O=Object(j.a)(m,2),x=O[0],N=O[1],y=Object(i.h)().search,g=K.a.parse(y).date,w=Object(a.useState)([]),_=Object(j.a)(w,2),S=_[0],C=_[1],D=Object(a.useState)(null),F=Object(j.a)(D,2),R=F[0],A=F[1];function E(){var e=new AbortController;return A(null),T(e.signal).then(C).catch(A),function(){return e.abort()}}function P(){var e=new AbortController;return h(null),g?(N(g.slice(0,10)),k({date:g},e.signal).then(s).catch(h)):(N(t),k({date:t},e.signal).then(s).catch(h)),function(){return e.abort()}}return Object(a.useEffect)(E,[]),Object(a.useEffect)(P,[y,x,t,g]),Object(a.useEffect)((function(){if(y)return;var e=new AbortController;return N(t),function(){return e.abort()}}),[y,t]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"container p-3 my-2 text-white",children:[Object(o.jsx)("div",{className:"nav-custom row justify-content-center",children:Object(o.jsx)("div",{className:"col-5.5 p-3 mb-2 text-white",children:Object(o.jsx)("h1",{className:"nav-custom m-3 pl-3",children:"Reservations Dashboard"})})}),Object(o.jsxs)("div",{className:"nav-custom row justify-content-center",children:[Object(o.jsx)("div",{className:"col-1.5",children:Object(o.jsx)("button",{id:"today",type:"today",className:"btn btn-outline-primary btn m-2",children:Object(o.jsx)(l.b,{to:"/dashboard?date=".concat(v(x)),children:"Previous"})})}),Object(o.jsx)("div",{className:"col-1.5",children:Object(o.jsx)("button",{id:"today",type:"today",className:"btn btn-outline-primary btn m-2",children:Object(o.jsx)(l.b,{to:"/dashboard?date=".concat(p()),children:"Today"})})}),Object(o.jsx)("div",{className:"col-1.5",children:Object(o.jsx)("button",{id:"next",type:"next",className:"btn btn-outline-primary btn m-2",children:Object(o.jsx)(l.b,{to:"/dashboard?date=".concat(f(x)),children:"Next"})})})]}),Object(o.jsx)("div",{className:"nav-custom row justify-content-center",children:Object(o.jsx)("div",{className:"col-2.5",children:Object(o.jsx)("h4",{className:"m-3",children:x})})}),Object(o.jsx)("div",{className:"nav-custom row justify-content-center",children:Object(o.jsx)("div",{className:"col-3",children:Object(o.jsx)("input",{type:"date",className:"form-control",name:"reservation_date",id:"reservation_date",placeholder:"Date of Reservation"})})})]}),Object(o.jsx)(q,{error:R}),Object(o.jsx)(q,{error:u}),Object(o.jsxs)("div",{className:"container p-3 my-2",children:[Object(o.jsx)(H,{reservations:c,loadDashboard:P}),Object(o.jsx)(Y,{tables:S,loadDashboard:P,loadTables:E})]})]})};var V=function(){return Object(o.jsx)("div",{className:"NotFound",children:Object(o.jsx)("h1",{children:"Not Found"})})},W=n(12),X=n(8);function Z(e,t){t.messages=[];var n=e.first_name,a=e.last_name,r=e.mobile_number,c=e.reservation_time,s=e.reservation_date,i=e.people,l=new Date,o="".concat(s," ").concat(c),b=new Date(o.toString()),j=new Date(b.toUTCString());return n||t.messages.push("Missing first name"),a||t.messages.push("Missing last name"),r||t.messages.push("Missing mobile number"),c||t.messages.push("Missing time"),s||t.messages.push("Missing date"),i||t.messages.push("Missing paty size"),isNaN(Date.parse(s))&&t.messages.push("Date is not valid"),j<l&&t.messages.push("Date must be in the future"),2===b.getDay()&&t.messages.push("closed on tuesdays"),c<"10:30"&&t.messages.push("Pick a later time, we open at 10:30 AM"),c>"21:30"&&t.messages.push("Pick an earlier time, we close at 9:30 PM"),!(t.messages.length>0)}function $(e){var t=e.reservation,n=e.errors,a=e.handleSubmit,r=e.handleChange,c=Object(i.g)(),s="Resolve these issues: ".concat(n.messages.join(",\n ")," !");return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("form",{children:[n.messages.length?Object(o.jsx)("div",{className:"alert alert-danger",role:"alert",children:s}):Object(o.jsx)("div",{}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"first_name",className:"form-label",children:"First Name:"}),Object(o.jsx)("input",{type:"text",className:"form-control",name:"first_name",id:"first_name",placeholder:"First Name",value:null===t||void 0===t?void 0:t.first_name,onChange:r})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"last_name",className:"form-label",children:"Last Name:"}),Object(o.jsx)("input",{type:"text",className:"form-control",name:"last_name",id:"last_name",placeholder:"Last Name",value:null===t||void 0===t?void 0:t.last_name,onChange:r})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"mobile_number",className:"form-label",children:"Mobile Number:"}),Object(o.jsx)("input",{type:"tel",className:"form-control",name:"mobile_number",id:"mobile_number",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",placeholder:"xxx-xxx-xxxx",value:null===t||void 0===t?void 0:t.mobile_number,onChange:r,required:!0})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"reservation_date",className:"form-label",children:"Date of reservation:"}),Object(o.jsx)("input",{type:"date",className:"form-control",name:"reservation_date",id:"reservation_date",placeholder:"Date of Reservation",value:null===t||void 0===t?void 0:t.reservation_date,onChange:r})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"reservation_time",className:"form-label",children:"Time of reservation:"}),Object(o.jsx)("input",{type:"time",className:"form-control",name:"reservation_time",id:"reservation_time",placeholder:"Time of Reservation",value:null===t||void 0===t?void 0:t.reservation_time,onChange:r})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"people",className:"form-label",children:"Number of people:"}),Object(o.jsx)("input",{type:"number",min:"1",pattern:"\\d+",className:"form-control",name:"people",id:"people",placeholder:"10",value:null===t||void 0===t?void 0:t.people,onChange:r})]}),Object(o.jsx)("button",{onClick:function(){return c.goBack()},type:"cancel",className:"buttonSpace btn btn-secondary",children:"Cancel"}),Object(o.jsx)("button",{type:"submit",onClick:a,className:"btn btn-primary m-2",children:"Submit"})]})})}function ee(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(j.a)(c,2),l=s[0],b=s[1],d=Object(a.useState)({messages:[]}),m=Object(j.a)(d,2),O=m[0],x=m[1],p=Object(i.g)(),v=function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new AbortController,t.preventDefault(),Z(n,O)){e.next=6;break}return x(Object(X.a)({},O)),e.abrupt("return",O.messages);case 6:return r=Object(X.a)(Object(X.a)({},n),{},{people:Number(n.people)}),e.next=10,J({data:r},a.signal).then((function(){return p.replace("/dashboard?date=".concat(r.reservation_date))})).catch(b);case 10:return e.abrupt("return",(function(){return a.abort()}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"nav-custom container p-3 my-2 text-white",children:Object(o.jsx)("div",{className:"nav-custom row m-5 justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5 p-3",children:Object(o.jsx)("h1",{className:"m-3",children:"Create a Reservation"})})})}),Object(o.jsxs)("div",{className:"container p-3 my-2",children:[Object(o.jsx)(q,{error:l}),Object(o.jsx)($,{reservation:n,errors:O,handleSubmit:v,handleChange:function(e){x({messages:[]});var t=e.target,a=t.name,c=t.value;r(Object(X.a)(Object(X.a)({},n),{},Object(W.a)({},a,c)))}})]})]})}function te(){var e=Object(i.g)(),t=Object(i.i)().reservation_id,n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],s=r[1],l=Object(a.useState)([]),b=Object(j.a)(l,2),d=b[0],u=b[1],h=Object(a.useState)(""),m=Object(j.a)(h,2),O=m[0],x=m[1],v=Object(a.useState)({}),f=Object(j.a)(v,2),N=f[0],y=f[1],g=Object(a.useState)(null),w=Object(j.a)(g,2),_=w[0],S=w[1];Object(a.useEffect)((function(){var e=new AbortController;return x(null),T(e.signal).then((function(e){u(e),s(e[0].table_id)})).catch(x),function(){return e.abort()}}),[]),Object(a.useEffect)((function(){var e=new AbortController;return S(null),D(t,e.signal).then(y).catch(S),function(){return e.abort()}}),[t]);var k=d.map((function(e){return Object(o.jsxs)("option",{value:Number(e.table_id),children:[e.table_name," - ",e.capacity]},Number(e.table_id))}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"container p-3 my-2 nav-custom text-white",children:Object(o.jsx)("div",{className:"row m-5 justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5  p-3 nav-custom text-white",children:Object(o.jsx)("h1",{className:"m-3",children:"Seat Reservation"})})})}),Object(o.jsxs)("div",{className:"container p-3 my-2 border border-primary bg-white text-white",children:[Object(o.jsx)("div",{className:"row my-3 justify-content-center",children:Object(o.jsxs)("div",{className:"col-5 align-self-center border border-primary p-3 nav-custom-2 text-white",children:[Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsxs)("h4",{children:[N.first_name," ",N.last_name]})}),Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsxs)("h4",{children:["Party of ",N.people]})})]})}),Object(o.jsx)("div",{className:"row my-3 justify-content-center",children:Object(o.jsxs)("div",{className:"col-5 align-self-center border border-primary p-3 nav-custom-2 text-white",children:[Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsx)("h4",{children:"Phone #: "})}),Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsx)("h4",{children:N.mobile_number})})]})})]}),Object(o.jsxs)("div",{className:"container p-3 my-2 nav-custom text-white",children:[Object(o.jsx)("div",{className:"row mb-2 justify-content-center",children:Object(o.jsx)("div",{className:"col-2.5 p-3 nav-custom text-white",children:Object(o.jsx)("h2",{children:"Select Table "})})}),Object(o.jsx)("div",{className:"row justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5 m-2 p-3 border border-primary nav-custom-2 text-white",children:Object(o.jsxs)("form",{children:[Object(o.jsx)("label",{className:"",children:"Table#"}),Object(o.jsx)("select",{name:"table_id",onChange:function(e){var t=e.target;s(t.value)},value:c,className:"form-select form-select-lg mb-2",children:k})]})})}),Object(o.jsxs)("div",{className:"row justify-content-center",children:[Object(o.jsx)("div",{className:"col-1 p-2 bg-dark text-white",children:Object(o.jsx)("button",{type:"submit",onClick:function(n){n.preventDefault();var a=new AbortController;x(null);var r=d.find((function(e){return e.table_id===Number(c)}));if(!(N.people>r.capacity))return function(e,t,n,a){return U.apply(this,arguments)}(c,{data:{reservation_id:t}},"PUT",a.signal).then((function(){e.push({pathname:"/dashboard",search:"?date=".concat(N.reservation_date)})})).catch(x),function(){return a.abort()};x({message:"Party size is greater then table capacity, choose another table."})},className:"btn btn-outline-primary",children:"Confirm"})}),Object(o.jsx)("div",{className:"col-1 p-2 bg-dark text-white",children:Object(o.jsx)("button",{type:"cancel",onClick:function(){return e.push("/dashboard?date=".concat(p()))},className:"btn btn-outline-danger mb-1",children:"Cancel"})})]})]}),Object(o.jsx)(q,{error:O}),Object(o.jsx)(q,{error:_})]})}function ne(){var e=Object(a.useState)({messages:[]}),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(i.g)(),s=Object(i.i)().reservation_id,l=Object(a.useState)({}),b=Object(j.a)(l,2),d=b[0],m=b[1],x=Object(a.useState)(null),p=Object(j.a)(x,2),v=p[0],f=p[1];Object(a.useEffect)((function(){var e=new AbortController;return f(null),D(s,e.signal).then(m).catch(f),function(){return e.abort()}}),[s]);var N=function(){var e=Object(h.a)(u.a.mark((function e(t){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new AbortController,t.preventDefault(),Z(d,n)){e.next=6;break}return r(Object(X.a)({},n)),e.abrupt("return",n.messages);case 6:return s=Object(X.a)(Object(X.a)({},d),{},{reservation_time:(i=d.reservation_time,i.match(O)[0]),people:Number(d.people)}),e.next=10,P(d.reservation_id,{data:s},a.signal).then((function(){c.push({pathname:"/dashboard",search:"?date=".concat(d.reservation_date)})}));case 10:return e.abrupt("return",(function(){a.abort()}));case 11:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"nav-custom container p-3 my-2 text-white",children:Object(o.jsx)("div",{className:"row m-5 justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5  p-3 nav-custom text-white",children:Object(o.jsx)("h1",{className:"m-3",children:"Edit a Reservation"})})})}),Object(o.jsxs)("div",{className:"container p-3 my-2",children:[Object(o.jsx)(q,{error:v}),Object(o.jsx)($,{reservation:d,errors:n,handleSubmit:N,handleChange:function(e){r({messages:[]});var t=e.target,n=t.name,a=t.value;m(Object(X.a)(Object(X.a)({},d),{},Object(W.a)({},n,a)))}})]})]})}function ae(){return Object(o.jsx)(a.Fragment,{children:Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{exact:!0,path:"/reservations/new",children:Object(o.jsx)(ee,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/seat",children:Object(o.jsx)(te,{})}),Object(o.jsx)(i.b,{exact:!0,path:"/reservations/:reservation_id/edit",children:Object(o.jsx)(ne,{})}),Object(o.jsx)(i.b,{children:Object(o.jsx)(V,{})})]})})}function re(){var e=Object(i.g)(),t=Object(a.useState)({}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=function(e){var t=e.target,n=t.name,a=t.value;c(Object(X.a)(Object(X.a)({},r),{},Object(W.a)({},n,a)))},l=Object(a.useState)(null),b=Object(j.a)(l,2),d=b[0],m=b[1],O=function(){var t=Object(h.a)(u.a.mark((function t(n){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new AbortController,n.preventDefault(),c=Object(X.a)(Object(X.a)({},r),{},{capacity:Number(r.capacity)}),t.next=5,B({data:c},a.signal).then((function(){e.replace("/dashboard")})).catch(m);case 5:return t.abrupt("return",(function(){a.abort()}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"container p-3 my-2 nav-custom text-white",children:Object(o.jsx)("div",{className:"row m-5 justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5  p-3 nav-custom text-white",children:Object(o.jsx)("h1",{className:"m-3",children:"Create a Table"})})})}),Object(o.jsxs)("div",{className:"container p-3 my-2",children:[Object(o.jsx)(q,{error:d}),Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{for:"table_name",className:"form-label",children:"Table Name:"}),Object(o.jsx)("input",{type:"text",className:"form-control",name:"table_name",id:"table_name",placeholder:"Table Name",value:null===r||void 0===r?void 0:r.table_name,onChange:s})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{for:"capacity",className:"form-label",children:"Capacity of Table:"}),Object(o.jsx)("input",{type:"number",min:"1",pattern:"\\d+",className:"form-control",name:"capacity",id:"capacity",placeholder:"10",value:null===r||void 0===r?void 0:r.capacity,onChange:s})]}),Object(o.jsx)("button",{onClick:function(){return e.goBack()},type:"button",className:"buttonSpace btn btn-secondary",children:"Cancel"}),Object(o.jsx)("button",{type:"submit",onClick:O,className:"btn btn-primary",children:"Submit"})]})]})]})}function ce(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],l=s[1],b=Object(a.useState)(!1),d=Object(j.a)(b,2),u=d[0],h=d[1];var m=Object(o.jsx)("b",{children:"No reservations found"});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"container p-3 my-2 nav-custom text-white",children:Object(o.jsx)("div",{className:"row m-5 justify-content-center",children:Object(o.jsx)("div",{className:"col-4.5  p-3 nav-custom text-white",children:Object(o.jsx)("h1",{className:"m-3",children:"Search for a Reservation"})})})}),Object(o.jsx)(q,{error:i}),Object(o.jsx)("div",{className:"container border border-primary bg-white text-white",children:Object(o.jsxs)("div",{className:"row justify-content-center p-2",children:[Object(o.jsx)("div",{className:"col-6",children:Object(o.jsx)("input",{type:"text",className:"form-control form-control",id:"mobile_number",name:"mobile_number",onChange:function(e){e.target,h(!1)},placeholder:"Enter a customer's phone number"})}),Object(o.jsx)("div",{className:"col-2",children:Object(o.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),r([]);var t=document.getElementById("mobile_number").value,n=new AbortController;return k({mobile_number:t},n.signal).then((function(e){e.length?r(e):h(!0)})).catch(l),function(){return n.abort()}},className:"btn btn-outline-primary",children:"Submit"})})]})}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h6",{children:n.length?Object(o.jsx)(H,{reservations:n}):null}),u?m:null]})]})}var se=function(){return Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{exact:!0,path:"/",children:Object(o.jsx)(i.a,{to:"/dashboard"})}),Object(o.jsx)(i.b,{path:"/search",children:Object(o.jsx)(ce,{})}),Object(o.jsx)(i.b,{path:"/reservations",children:Object(o.jsx)(ae,{})}),Object(o.jsx)(i.b,{path:"/dashboard",children:Object(o.jsx)(Q,{date:p()})}),Object(o.jsx)(i.b,{exact:!0,path:"/tables/new",children:Object(o.jsx)(re,{})}),Object(o.jsx)(i.b,{children:Object(o.jsx)(V,{})})]})};var ie=function(){return Object(o.jsx)("div",{className:"res-dash container-fluid",children:Object(o.jsxs)("div",{className:"row min-vh-100 flex-column flex-md-row",children:[Object(o.jsx)("div",{className:"nav-custom col-12 col-md-2 p-0 flex-shrink-1 side-bar",children:Object(o.jsx)(b,{})}),Object(o.jsx)("div",{className:"col bg-white ",children:Object(o.jsx)(se,{})})]})})};var le=function(){return Object(o.jsx)(i.d,{children:Object(o.jsx)(i.b,{path:"/",children:Object(o.jsx)(ie,{})})})};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(l.a,{children:Object(o.jsx)(le,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.69ed994f.chunk.js.map